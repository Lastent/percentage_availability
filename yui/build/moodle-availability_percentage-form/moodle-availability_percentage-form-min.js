YUI.add('moodle-availability_percentage-form',function(Y,NAME){M.availability_percentage=M.availability_percentage||{};M.availability_percentage.form=Y.Object(M.core_availability.plugin);M.availability_percentage.form.initInner=function(cms){this.cms=cms;};M.availability_percentage.form.getNode=function(json){var html='<span class="col-form-label p-r-1"> '+M.util.get_string('title','availability_percentage')+'</span>'+' <span class="availability-group form-group"><label>'+'<span class="accesshide">'+M.util.get_string('label_cm','availability_percentage')+' </span>'+'<select class="custom-select" name="cm" title="'+M.util.get_string('label_cm','availability_percentage')+'">'+'<option value="0">'+M.util.get_string('choosedots','moodle')+'</option>';for(var i=0;i<this.cms.length;i++){var cm=this.cms[i];html+='<option value="'+cm.id+'">'+cm.name+'</option>';}
html+='</select></label> <label><span class="accesshide">'+M.util.get_string('label_percentage','availability_percentage')+' </span><input type="number" class="form-control" '+'name="p" min="0" max="100" step="1" '+'style="width: 80px; display: inline-block;" '+'title="'+M.util.get_string('label_percentage','availability_percentage')+'" '+'placeholder="50" value="50"> <span class="p-l-1">%</span>'+'</label></span>';var node=Y.Node.create('<span class="form-inline">'+html+'</span>');if(json.cm!==undefined&&node.one('select[name=cm] > option[value='+json.cm+']')){node.one('select[name=cm]').set('value',''+json.cm);}
if(json.p!==undefined){node.one('input[name=p]').set('value',''+json.p);}
if(!M.availability_percentage.form.addedEvents){M.availability_percentage.form.addedEvents=true;var root=Y.one('.availability-field');root.delegate('change',function(){M.core_availability.form.update();},'.availability_percentage select, .availability_percentage input');root.delegate('input',function(){M.core_availability.form.update();},'.availability_percentage input[type=number]');}
return node;};M.availability_percentage.form.fillValue=function(value,node){value.cm=parseInt(node.one('select[name=cm]').get('value'),10);value.p=parseInt(node.one('input[name=p]').get('value'),10);};M.availability_percentage.form.fillErrors=function(errors,node){var cmid=parseInt(node.one('select[name=cm]').get('value'),10);if(cmid===0){errors.push('availability_percentage:error_selectcmid');}
var percentage=parseInt(node.one('input[name=p]').get('value'),10);if(isNaN(percentage)||percentage<0||percentage>100){errors.push('availability_percentage:error_percentage');}};},'@VERSION@',{"requires":["base","node","event","moodle-core_availability-form"]});
